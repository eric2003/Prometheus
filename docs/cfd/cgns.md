# CGNS

## Article link

-  [CFD General Notation System](https://cgns.github.io/).
-  [CGNS standard document](https://cgns.github.io/CGNS_docs_current/).
-  [CGNS code repository](https://cgns.github.io/CGNS_docs_current/).
-  [CGNS4.4.0源码下载地址](https://zhuanlan.zhihu.com/p/661758085/).
-  [CGNS and HDF5 compiling and linking related article links compilation](https://zhuanlan.zhihu.com/p/452874893/).

## CGNS and HDF5 compiling and linking

-  [CGNS简介](https://zhuanlan.zhihu.com/p/108787777/).
-  [从源代码编译CGNS(系统Win10)](https://zhuanlan.zhihu.com/p/109012161/).
-  [Win10+VS2019+HDF5下CGNS源码编译CGNSTOOLS](https://zhuanlan.zhihu.com/p/109181415/).
-  [Win10+HDF5-1.10.7编译CGNS4.2.0 TOOLS](https://zhuanlan.zhihu.com/p/391378521/).
-  [Win10+VS2019源码编译HDF5（1.10.6）](https://zhuanlan.zhihu.com/p/109982861/).
-  [CGNS源代码下载地址](https://zhuanlan.zhihu.com/p/111843269/).
-  [Win10下CGNS4.1.0源代码编译的一些问题](https://zhuanlan.zhihu.com/p/112049527/).
-  [Ubuntu18.04+GCC9.2.1源码编译HDF5（1.10.6）](https://zhuanlan.zhihu.com/p/112453360/).
-  [Ubuntu18.04+GCC9.2.1源码编译CGNS（4.0.0）](https://zhuanlan.zhihu.com/p/112730011/).
-  [从源代码编译CGNS3.4.0(系统Win10)](https://zhuanlan.zhihu.com/p/148868000/).
-  [对于CGNS专栏相关问题的解答原则](https://zhuanlan.zhihu.com/p/157647816/).
-  [Win10+HDF5-1.12.1编译CGNS4.2.0](https://zhuanlan.zhihu.com/p/390929416/).
-  [如何使用CGNS库建立并运行简单CGNS代码](https://zhuanlan.zhihu.com/p/390937821/).
-  [关于CGNS在Debian下的编译问题](https://zhuanlan.zhihu.com/p/394707448/).
-  [Win10下安装运行HDFView 3.1.2](https://zhuanlan.zhihu.com/p/452879842/).
-  [CMake输出Win10系统下HDF5的信息](https://zhuanlan.zhihu.com/p/452882648/).
-  [Win10下使用CMake编译运行简单C++HDF5代码](https://zhuanlan.zhihu.com/p/452884128/).
-  [Win10下通过PowerShell脚本安装配置HDF5-1.12.1](https://zhuanlan.zhihu.com/p/452894227/).
-  [使用GitHub Actions在windows服务器下载安装HDF5-1.12.1-GitHub Actions 从入门到精通（21）](https://zhuanlan.zhihu.com/p/390649045/).
-  [在windows服务器下编译运行HDF5代码](https://zhuanlan.zhihu.com/p/390772352/).
-  [Win11+CMake+vscode编译运行hdf5示例代码](https://zhuanlan.zhihu.com/p/452935875/).
-  [VS2019+hdf5-1.12.1静态编译运行hdf5示例代码](https://zhuanlan.zhihu.com/p/453139369/).
-  [HDF5库版本不匹配错误（HDF5 library version mismatched error）](https://zhuanlan.zhihu.com/p/453235642/).
-  [VS2019+CMake编译并运行简单CGNS代码](https://zhuanlan.zhihu.com/p/453425957/).
-  [Win11+vscode+CMake编译并运行简单CGNS代码](https://zhuanlan.zhihu.com/p/453546841/).
-  [Win11+VS2022+CMake3.23.1+HDF51.12.2+CGNS4.3.0源码编译CGNSTOOLS](https://zhuanlan.zhihu.com/p/509174617/).
-  [hdf5-1.10.8下载地址](https://zhuanlan.zhihu.com/p/511710059/).
-  [Win11+Powershell命令行运行不同版本的CGNSTools](https://zhuanlan.zhihu.com/p/511914455/).
-  [对于编译运行CGNSTools过程出错的一种解释](https://zhuanlan.zhihu.com/p/511921729/).
-  [CGNSView代码架构简化模拟系列链接](https://zhuanlan.zhihu.com/p/515987383/).
-  [Windows11+CGNS4.3.0+HDF51.12.2+源码编译CGNSTOOLS读取HDF5格式文件的问题](https://zhuanlan.zhihu.com/p/517337277/).
-  [Win11+VS2022+CGNS4.3.0+Intel Fortran源码编译CGNS静态库](https://zhuanlan.zhihu.com/p/558634899/).
-  [Win11+VS2022+Fortran90调用CGNS静态库简单测试](https://zhuanlan.zhihu.com/p/558645651/).
-  [Win11+VS2022+CGNS4.3.0+Intel Fortran源码编译CGNS动态库](https://zhuanlan.zhihu.com/p/558653601/).
-  [Win11+VS2022+Fortran90调用CGNS动态库简单测试](https://zhuanlan.zhihu.com/p/558668107/).
-  [Win11+VS2022+CGNS4.3.0+HDF51.13.2+Intel Fortran源码编译CGNS静态库](https://zhuanlan.zhihu.com/p/558684567/).
-  [Win11+VS2022+Fortran90调用CGNS(HDF5-1.13.2)静态库简单测试](https://zhuanlan.zhihu.com/p/558713278/).
-  [Win11+VS2022+CGNS4.3.0+HDF5-1.13.2+Intel Fortran源码编译CGNS动态库](https://zhuanlan.zhihu.com/p/558724440/).
-  [Win11+VS2022+Fortran90调用CGNS(HDF5-1.13.2)动态库简单测试](https://zhuanlan.zhihu.com/p/558742938/).
-  [Win11+VS2022+CGNS4.3.0+HDF5-1.13.2+Intel Fortran源码编译CGNSTOOLS](https://zhuanlan.zhihu.com/p/558816449/).
-  [Win11+CMake+hdf5+appending to a hdf5 file简单测试](https://zhuanlan.zhihu.com/p/587888831/).
-  [HDF5+源码+安装文件下载地址](https://zhuanlan.zhihu.com/p/588390296/).
-  [windows11+HDF51.13.3下载安装](https://zhuanlan.zhihu.com/p/588396884/).
-  [CMake+VS2022+hdf5-1.14.0编译运行hdf5示例代码h5ex_t_int.c](https://zhuanlan.zhihu.com/p/599518429/).
-  [CMake+VS2022+H5get_libversion简单测试](https://zhuanlan.zhihu.com/p/599650254/).
-  [CMake+VS2022+vcpkg+H5get_libversion版本冲突问题](https://zhuanlan.zhihu.com/p/599660610/).
-  [vcpkg+HDF5 library version mismatched error](https://zhuanlan.zhihu.com/p/599835814/).
-  [HDF5 1.14.2下载地址](https://zhuanlan.zhihu.com/p/661750780/).
-  [CGNS4.4.0源码下载地址](https://zhuanlan.zhihu.com/p/661758085/).
-  [Windows11+VS2022+CMake+CGNS4.4.0静态库lib+HDF51.14.2静态库编译运行write_grid_str.c代码](https://zhuanlan.zhihu.com/p/662184950/).
-  [Windows11+VS2022+CMake+CGNS4.4.0静态库+HDF51.14.2动态库编译运行write_grid_str.c代码](https://zhuanlan.zhihu.com/p/662190467/).
-  [Windows11+VS2022+CMake+CGNS4.4.0动态库+HDF51.14.2动态库编译运行write_grid_str.c代码](https://zhuanlan.zhihu.com/p/662191373/).
-  [Win11+VS2022+CGNS4.4.0+HDF5-1.14.2+Intel Fortran源码编译CGNS+static+shared lib+CGNSTOOLS](https://zhuanlan.zhihu.com/p/667774236/).

## CGNS From Beginner to Master

-  [CGNS从入门到精通（1）：从读写空的文件开始](https://zhuanlan.zhihu.com/p/112157628/).
-  [CGNS从入门到精通（2）：写入多个最简单的数据库（CGNSBase_t Nodes）信息](https://zhuanlan.zhihu.com/p/112341779/).
-  [CGNS从入门到精通（3）：读写Descriptors（描述符）信息](https://zhuanlan.zhihu.com/p/112868690/).
-  [CGNS从入门到精通（4）：读写Links（链接符）信息](https://zhuanlan.zhihu.com/p/113401952/).
-  [CGNS从入门到精通（5）：读写自定义数组信息](https://zhuanlan.zhihu.com/p/113592645/).
-  [CGNS从入门到精通（6）：读写参考状态（Reference State）结点信息](https://zhuanlan.zhihu.com/p/113949229/).
-  [CGNS从入门到精通（7）：无量纲参数的标准化数据名简介](https://zhuanlan.zhihu.com/p/114056408/).
-  [CGNS从入门到精通（8）：读写收敛历程（Convergence History）结点信息](https://zhuanlan.zhihu.com/p/115413676/).
-  [CGNS从入门到精通（9）：读写控制方程相关（Governing Flow Equations）结点信息](https://zhuanlan.zhihu.com/p/115849810/).
-  [CGNS从入门到精通（10）：读写非结构网格边界条件（GridLocation_t）结点信息](https://zhuanlan.zhihu.com/p/384461090/).
-  [CGNS从入门到精通（11）写入多个不同CellDimension 的Structured Cgns Zone](https://zhuanlan.zhihu.com/p/560593343/).
-  [CGNS从入门到精通（12）CGNS写入流场简单测试](https://zhuanlan.zhihu.com/p/562012027/).
-  [CGNS从入门到精通（13）CGNS读取流场简单测试](https://zhuanlan.zhihu.com/p/562097715/).
-  [CGNS从入门到精通（14）CGNS修改流场简单测试](https://zhuanlan.zhihu.com/p/562115457/).
-  [CGNS从入门到精通（15）CGNS+cg_equationset_write简单测试](https://zhuanlan.zhihu.com/p/714713108/).
-  [CGNS从入门到精通（16）CGNS+cg_model_write简单测试](https://zhuanlan.zhihu.com/p/714721552/).
-  [CGNS从入门到精通（17）CGNS+cg_family_write简单测试](https://zhuanlan.zhihu.com/p/714725395/).
-  [CGNS从入门到精通（18）CGNS+cg_rotating_write简单测试](https://zhuanlan.zhihu.com/p/714731873/).
-  [CGNS从入门到精通（19）CGNS+cg_exponents_write简单测试](https://zhuanlan.zhihu.com/p/714737720/).
-  [CGNS从入门到精通（20）CGNS+cg_fambc_write简单测试](https://zhuanlan.zhihu.com/p/714751316/).
-  [CGNS从入门到精通（21）CGNS+cg_bcdataset_write简单测试](https://zhuanlan.zhihu.com/p/714753492/).
-  [CGNS从入门到精通（22）CGNS+cg_user_data_write简单测试](https://zhuanlan.zhihu.com/p/714760377/).
-  [CGNS从入门到精通（23）cg_user_data_write+cg_gridlocation_write简单测试](https://zhuanlan.zhihu.com/p/714761742/).
-  [CGNS从入门到精通（24）cg_user_data_write+cg_famname_write简单测试](https://zhuanlan.zhihu.com/p/714762684/).
-  [CGNS从入门到精通（25）cg_user_data_write+cg_ordinal_write简单测试](https://zhuanlan.zhihu.com/p/714763760/).

## Tcl/Tk 系列链接整理

-  [Tcl/Tk 系列链接整理](https://zhuanlan.zhihu.com/p/512365807/).
-  [tcl 与 c/c++ 相互调用](https://blog.csdn.net/wangcj625/article/details/6455740/).



## code example

cg_dataclass_read
```cpp
    DataClass_t dclass;
    cg_goto(this->fileId, 1, "end");
    cg_dataclass_read(&dclass);

    std::cout << "dclass = " << dclass << " dclass name = " << DataClassName[dclass] << "\n";

    CGNS_ENUMT(MassUnits_t) mass;
    CGNS_ENUMT(LengthUnits_t) length;
    CGNS_ENUMT(TimeUnits_t) time;
    CGNS_ENUMT(TemperatureUnits_t) temp;
    CGNS_ENUMT(AngleUnits_t) angle;
    CGNS_ENUMT(ElectricCurrentUnits_t) current;
    CGNS_ENUMT(SubstanceAmountUnits_t) amount;
    CGNS_ENUMT(LuminousIntensityUnits_t) intensity;

    CGNS_ENUMT(MassUnits_t) im;
    CGNS_ENUMT(LengthUnits_t) il;
    CGNS_ENUMT(TimeUnits_t) it;
    CGNS_ENUMT(TemperatureUnits_t) ix;
    CGNS_ENUMT(AngleUnits_t) ia;

    cg_units_read(&im,&il,&it,&ix,&ia);

    std::printf("\nUnits=\n    %s\n    %s\n    %s\n    %s\n    %s\n",
           MassUnitsName[im],LengthUnitsName[il],TimeUnitsName[it],
           TemperatureUnitsName[ix],AngleUnitsName[ia]);

    int nunits = -1;
    cg_nunits(&nunits);

    std::cout << "   CGNS nunits = " << nunits << "\n";

    cg_unitsfull_read(&mass, &length, &time, &temp, &angle, &current, &amount, &intensity);
    std::cout << "mass = " << mass << " MassUnitsName[mass] = " << MassUnitsName[mass]<<"\n";
    std::cout << "length = " << length << " LengthUnitsName[length] = " << LengthUnitsName[length]<<"\n";
    std::cout << "time = " << time << " TimeUnitsName[time] = " << TimeUnitsName[time]<<"\n";
    std::cout << "temp = " << temp << " TemperatureUnitsName[temp] = " << TemperatureUnitsName[temp]<<"\n";
    std::cout << "angle = " << angle<< " AngleUnitsName[angle] = " << AngleUnitsName[angle]<<"\n";
    std::cout << "current = " << current<< " ElectricCurrentUnitsName[current] = " << ElectricCurrentUnitsName[current]<<"\n";
    std::cout << "amount = " << amount<< " SubstanceAmountUnitsName[amount] = " << SubstanceAmountUnitsName[amount]<<"\n";
    std::cout << "intensity = " << intensity << " LuminousIntensityUnitsName[intensity] = " << LuminousIntensityUnitsName[intensity]<<"\n";
```

## recurse_nodes

recurse_nodes
```cpp
static int recurse_nodes (int input, double InputID,
    int output, double OutputID, int follow_links, int depth)
{
    int n, nchild, cnt, name_len, file_len;
    char name[CGIO_MAX_NAME_LENGTH+1];
    char *link_name, *link_file;
    double childID, newID;

    /* Copy the data from the current input node to the output node */

    if (depth && cgio_copy_node(input, InputID, output, OutputID))
        return CG_ERROR;

    /* Loop through the children of the current node */

    if (cgio_number_children(input, InputID, &nchild))
        return CG_ERROR;
    for (n = 1; n <= nchild; n++) {
        if (cgio_children_ids(input, InputID, n, 1, &cnt, &childID) ||
            cgio_get_name(input, childID, name) ||
            cgio_is_link(input, childID, &name_len))
            return CG_ERROR;
        if (name_len) {
            if (cgio_link_size(input, childID, &file_len, &name_len))
                return CG_ERROR;
        }
        if (name_len && (file_len == 0 || follow_links == 0)) {
            link_file = (char *) malloc (file_len + name_len + 2);
            if (link_file == NULL) {
                set_error(CGIO_ERR_MALLOC);
                return CG_ERROR;
            }
            link_name = link_file + file_len + 1;
            if (cgio_get_link(input, childID, link_file, link_name)) {
                free (link_file);
                return CG_ERROR;
            }
            link_file[file_len] = 0;
            link_name[name_len] = 0;
            if (cgio_create_link(output, OutputID, name, link_file,
                    link_name, &newID)) {
                free (link_file);
                return CG_ERROR;
            }
            free (link_file);
        }
        else {
            if (cgio_create_node(output, OutputID, name, &newID) ||
                recurse_nodes(input, childID, output, newID,
                    follow_links, ++depth))
                return CG_ERROR;
        }
    }
    return CG_OK;
}
```

## CGIOsize
```cpp
static int CGIOsize (ClientData data, Tcl_Interp *interp,
    int argc, char **argv)
{
    cgsize_t np;
    char str[65];
    double node_id;
    struct DataType *type;

    Tcl_ResetResult (interp);
    if (argc != 2) {
        Tcl_AppendResult (interp, "wrong # args: should be \"",
            argv[0], " node\"", NULL);
        return TCL_ERROR;
    }
    if (cgioNum == 0) {
        Tcl_AppendResult (interp, "no database is open", NULL);
        return TCL_ERROR;
    }

    if (get_node (interp, argv[1], &node_id))
        return TCL_ERROR;

    np = data_size (interp, node_id);
    if (np == -1)
        return TCL_ERROR;
    type = data_type (interp, node_id);
    if (NULL == type)
        return TCL_ERROR;
    sprintf (str, "%u", (unsigned)np * (unsigned)type->bytes);
    Tcl_AppendResult (interp, str, NULL);
    return TCL_OK;
}
```

## Complex

```cpp
typedef struct _C_double_complex
{
    double _Val[2];
} _C_double_complex;

typedef struct _C_float_complex
{
    float _Val[2];
} _C_float_complex;

typedef struct _C_ldouble_complex
{
    long double _Val[2];
} _C_ldouble_complex;

typedef _C_double_complex  _Dcomplex;
typedef _C_float_complex   _Fcomplex;
typedef _C_ldouble_complex _Lcomplex;
```

## Compile

ifmodintr.lib
```
8>LINK : fatal error LNK1104: 无法打开文件“ifmodintr.lib”
```
version 1
```
cd d:\work\cgns_work\CGNS-4.4.0-Modified\build\
$env:path += ";c:\Program Files (x86)\Intel\oneAPI\compiler\latest\windows\compiler\lib\intel64\"
& .\cgns.sln
```

version 2
```
cd d:\work\cgns_work\CGNS-4.4.0-Modified\build\
$env:path += ";c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\"
& .\cgns.sln
```

```
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\ifmodintr.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\ifconsol.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\libifcoremd.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\libifportmd.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\libmmd.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\libirc.lib
c:\Program Files (x86)\Intel\oneAPI\compiler\latest\lib\svml_dispmd.lib
```


